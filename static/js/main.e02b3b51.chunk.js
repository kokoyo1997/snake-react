(this["webpackJsonpsnake-react"]=this["webpackJsonpsnake-react"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(6),r=n.n(a),s=(n(13),n(14),n(8)),o=n(2),i=n(7),u=20,l="UP",f="BOTTOM",j="RIGHT",b="LEFT",d={UP:function(e,t){return{x:e,y:t-1}},BOTTOM:function(e,t){return{x:e,y:t+1}},RIGHT:function(e,t){return{x:e+1,y:t}},LEFT:function(e,t){return{x:e-1,y:t}}},O={38:"UP",39:"RIGHT",37:"LEFT",40:"BOTTOM"},v="ready",x="run",h="pause",m="over",k=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},y=function(){return{x:k(0,19),y:k(0,19)}},g=function e(t){var n=y();return t.forEach((function(c){n.x===c.x&&n.y===c.y&&(n=e(t))})),n},p=function(){var e=new Date,t=""+e.getHours(),n=""+e.getMinutes(),c=""+e.getSeconds();return(2===t.length?t:"0"+t)+":"+(2===n.length?n:"0"+n)+":"+c},N=function(){var e=localStorage.getItem("snake-hs");return void 0==e?0:e},w=function(e){return[e%u,Math.floor(e/u)]},S=function(e){return e[0]},T=n(0);var I=function(e){var t=e.snake,n=e.food,c=e.idx,a="square";return!function(e,t){var n,c=w(e),a=Object(o.a)(c,2),r=a[0],s=a[1],u=Object(i.a)(t);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(l.x===r&&l.y===s)return!0}}catch(f){u.e(f)}finally{u.f()}return!1}(c,t)?function(e,t){var n=w(e),c=Object(o.a)(n,2),a=c[0],r=c[1];return t.x===a&&t.y===r}(c,n)&&(a+=" food"):a+=" snake",Object(T.jsx)("div",{className:a})};var _=function(e){var t=e.snake,n=e.food;return Object(T.jsx)("div",{className:"board",children:new Array(400).fill(null).map((function(e,c){return Object(T.jsx)(I,{snake:t,food:n,idx:c},c)}))})};var C=function(e){var t=e.time,n=e.score,c=e.hs,a=e.gs;return Object(T.jsxs)("div",{className:"info",children:[Object(T.jsxs)("div",{className:"socre",children:["Score: ",n]}),Object(T.jsxs)("div",{className:"time",children:["Time: ",t]}),Object(T.jsxs)("div",{className:"status",children:["Status: ",a," "]}),Object(T.jsxs)("div",{className:"high-socre",children:["High Score: ",c]})]})};var E=function(e){var t=e.handleControl,n=e.handleProcess;return Object(T.jsxs)("div",{className:"control",children:[Object(T.jsxs)("div",{className:"btns",children:[Object(T.jsx)("button",{className:"pause iconfont icon-ic_suspend",name:"pause",onClick:n}),Object(T.jsx)("button",{className:"restart iconfont icon-ic_refresh",name:"restart",onClick:n}),Object(T.jsx)("button",{className:"start iconfont icon-ic_play",name:"start",onClick:n})]}),Object(T.jsxs)("div",{className:"operate",children:[Object(T.jsx)("button",{className:"up iconfont icon-ic_arrow_up",name:l,onClick:t}),Object(T.jsx)("button",{className:"down iconfont icon-ic_arrow_down",name:f,onClick:t}),Object(T.jsx)("button",{className:"left iconfont icon-ic_arrow_left",name:b,onClick:t}),Object(T.jsx)("button",{className:"right iconfont icon-ic_arrow_right",name:j,onClick:t})]})]})};var M=function(){var e=Object(c.useState)(p()),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(N()),i=Object(o.a)(r,2),f=i[0],j=i[1],b=Object(c.useState)([y()]),k=Object(o.a)(b,2),w=k[0],I=k[1],M=Object(c.useState)(g(w)),H=Object(o.a)(M,2),L=H[0],P=H[1],B=Object(c.useState)(0),G=Object(o.a)(B,2),R=G[0],F=G[1],U=Object(c.useState)(l),J=Object(o.a)(U,2),q=J[0],A=J[1],D=Object(c.useState)(v),z=Object(o.a)(D,2),K=z[0],Q=z[1],V=function(e){var t=e.keyCode;A(O[t])};return Object(c.useEffect)((function(){return window.addEventListener("keyup",V,!1),function(){window.removeEventListener("keyup",V,!1)}}),[]),Object(c.useEffect)((function(){var e=null;return K===x&&(e=setInterval((function(){var t=S(w),n=d[q](t.x,t.y),c=Object(s.a)(w);if(c.unshift(n),function(e){var t=S(e);return t.x<0||t.y<0||t.x>=u||t.y>=u}(c))return Q(m),function(e,t){var n=Math.max(t,e);localStorage.setItem("snake-hs",n)}(R,f),j(N()),void clearInterval(e);var a=function(e){for(var t=S(e),n=e.length-1;n>0;n--)if(t.x===e[n].x&&t.y===e[n].y)return n;return-1}(c);-1!==a?(F((function(e){return Math.max(0,e-2*(c.length-a))})),c=c.slice(0,a)):!function(e,t){var n=S(e);return n.x===t.x&&n.y===t.y}(c,L)?c.pop():(P(g(c)),F((function(e){return e+c.length}))),I(c)}),200)),function(){console.log("clear ".concat(e)),e&&clearInterval(e)}})),Object(c.useEffect)((function(){var e=setInterval((function(){var e=p();a(e)}),1e3);return function(){clearInterval(e)}}),[]),Object(T.jsx)("div",{className:"box",children:Object(T.jsxs)("main",{children:[Object(T.jsx)("h1",{children:"Snake Game in React"}),Object(T.jsx)(_,{snake:w,food:L}),Object(T.jsxs)("div",{className:"side",children:[Object(T.jsx)(C,{time:n,score:R,hs:f,gs:K}),Object(T.jsx)(E,{handleControl:function(e){var t=e.target.name;A(t)},handleProcess:function(e){switch(e.target.name){case"start":K!==m&&Q(x);break;case"pause":K!==m&&Q(h);break;case"restart":Q(v),I([y()]),P(g(w)),F(0),A(l);break;default:Q(v)}}})]})]})})};r.a.render(Object(T.jsx)(M,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e02b3b51.chunk.js.map